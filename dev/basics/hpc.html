<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Parallel · OpenQuantumTools</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.044/juliamono.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/design.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../index.html"><img src="../assets/logo.jpg" alt="OpenQuantumTools logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../index.html">OpenQuantumTools</a></span></div><form class="docs-search" action="../search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../index.html">Home</a></li><li><span class="tocitem">Basics</span><ul><li><a class="tocitem" href="math_symbol.html">Math Symbol</a></li><li><a class="tocitem" href="hamiltonians.html">Hamiltonian</a></li><li><a class="tocitem" href="couplings.html">Coupling</a></li><li><a class="tocitem" href="bath.html">Bath</a></li><li><a class="tocitem" href="annealing.html">Annealing</a></li><li><a class="tocitem" href="solver.html">Solver</a></li><li class="is-active"><a class="tocitem" href="hpc.html">Parallel</a><ul class="internal"><li><a class="tocitem" href="#Starting-Julia-in-the-correct-parallel-model"><span>Starting <code>Julia</code> in the correct parallel model</span></a></li><li><a class="tocitem" href="#Building-a-problem"><span>Building a problem</span></a></li><li><a class="tocitem" href="#Solving-the-Problem"><span>Solving the Problem</span></a></li></ul></li></ul></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../lib/hamiltonian.html">Hamiltonian</a></li><li><a class="tocitem" href="../lib/matrix_util.html">Matrix Utility</a></li><li><a class="tocitem" href="../lib/coupling.html">Coupling</a></li><li><a class="tocitem" href="../lib/bath.html">Bath</a></li><li><a class="tocitem" href="../lib/interactions.html">Interaction</a></li><li><a class="tocitem" href="../lib/annealing.html">Annealing</a></li><li><a class="tocitem" href="../lib/solvers.html">Solver</a></li><li><a class="tocitem" href="../lib/callbacks.html">Callback</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Basics</a></li><li class="is-active"><a href="hpc.html">Parallel</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="hpc.html">Parallel</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/USCqserver/OpenQuantumTools.jl/blob/master/docs/src/basics/hpc.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Parallel-Simulation"><a class="docs-heading-anchor" href="#Parallel-Simulation">Parallel Simulation</a><a id="Parallel-Simulation-1"></a><a class="docs-heading-anchor-permalink" href="#Parallel-Simulation" title="Permalink"></a></h1><p><code>OpenQuantumTools</code> provides the parallel trajectory simulation capability through the <a href="https://diffeq.sciml.ai/stable/features/ensemble/#ensemble">ensemble simulation</a> interface of the <a href="https://diffeq.sciml.ai/stable/">DifferentialEquations.jl</a> package. </p><h2 id="Starting-Julia-in-the-correct-parallel-model"><a class="docs-heading-anchor" href="#Starting-Julia-in-the-correct-parallel-model">Starting <code>Julia</code> in the correct parallel model</a><a id="Starting-Julia-in-the-correct-parallel-model-1"></a><a class="docs-heading-anchor-permalink" href="#Starting-Julia-in-the-correct-parallel-model" title="Permalink"></a></h2><p><code>Julia</code> provides different paradigms of <a href="https://docs.julialang.org/en/v1/manual/parallel-computing/#Parallel-Computing">parallel computing</a> with their corresponding interfaces. <code>OpenQuantumTools</code> does not check or manage the parallel mode of the current <code>Julia</code> process. So to use a particular parallel paradigm (multi-threading, distributed computing, etc.), <code>Julia</code> must first be properly launched in the correct parallel mode. For example, to use the thread-level parallelization, <code>Julia</code> needs to be started with <a href="https://docs.julialang.org/en/v1/manual/multi-threading/#man-multithreading">multiple threads</a>; to use the cluster-level parallelization, Julia needs to be launched in a cluster environment using either the <a href="https://docs.julialang.org/en/v1/manual/distributed-computing/">distributed</a> interface or a <a href="https://github.com/JuliaParallel/ClusterManagers.jl">cluster manager</a>.</p><h2 id="Building-a-problem"><a class="docs-heading-anchor" href="#Building-a-problem">Building a problem</a><a id="Building-a-problem-1"></a><a class="docs-heading-anchor-permalink" href="#Building-a-problem" title="Permalink"></a></h2><p>To perform a simulation on an ensemble of trajectories, a <code>EnsembleProblem</code> needs to be defined. <code>OpenQuantumTools</code> provides a wrapper function for the <a href="https://diffeq.sciml.ai/stable/features/ensemble/#ensemble">original constructor</a>:</p><pre><code class="language-julia hljs">prob = build_ensembles(annealing::Annealing, tf::Real, type::Symbol, kwargs...)</code></pre><ul><li><code>annealing</code>: The annealing/evolution defined by the open quantum system model.</li><li><code>tf</code>: The total annealing/evolution time.</li><li><code>type</code>: The type of the trajectory simulation to perform. Currently four types of trajectory simulations are supported:<ul><li><code>:stochastic</code>: The stochastic Schrödinger equation for the <a href="https://uscqserver.github.io/HOQSTTutorials.jl/html/introduction/06-spin_fluctuators.html">spin-fluctuator model</a>;</li><li><code>:lindblad</code>: The trajectory simulation of the <a href="https://uscqserver.github.io/HOQSTTutorials.jl/html/introduction/02-lindblad_equation.html">Lindblad master equation</a>; </li><li><code>:ame</code>: The trajectory simulation of the <a href="https://uscqserver.github.io/HOQSTTutorials.jl/html/introduction/03-single_qubit_ame.html">adiabatic master equation</a>; </li><li><code>:redfield</code>: The time-form Redfield equation hybridized with spin-fluctuator noise.</li></ul></li></ul><p>All the other keyword arguments of the original constructor are also supported. To avoid complications, only the most relevant keyword arguments are listed here. Interested readers are encouraged to explore the original documentation for more features.</p><h2 id="Solving-the-Problem"><a class="docs-heading-anchor" href="#Solving-the-Problem">Solving the Problem</a><a id="Solving-the-Problem-1"></a><a class="docs-heading-anchor-permalink" href="#Solving-the-Problem" title="Permalink"></a></h2><pre><code class="language-julia hljs">sim = solve(prob::EnsembleProblem,alg,ensemblealg,kwargs...)</code></pre><p>The special keyword arguments to note are:</p><ul><li><code>trajectories</code>: The number of trajectory simulations to run. This argument is required.</li><li><code>ensemblealg</code>: The ensemble algorithm that specify how the multiple trajectories are handled. This argument is optional and will default to <code>EnsembleThreads()</code>. Currently, the ensemble algorithm types are:<ul><li><code>EnsembleSerial()</code> - No parallelism</li><li><code>EnsembleThreads()</code> - The default. This uses multithreading. It&#39;s local (single computer, shared memory)</li></ul>parallelism only. Fastest when the trajectories are quick.<ul><li><code>EnsembleDistributed()</code> - Uses <code>pmap</code> internally. It will use as many processors as the available Julia processes. To add more processes, use <code>addprocs(n)</code>. See Julia&#39;s documentation for more details. Recommended for the case when each trajectory calculation isn&#39;t &quot;too quick&quot;.</li><li><code>EnsembleSplitThreads()</code> - This uses threading on each process, splitting the problem</li></ul>into <code>nprocs()</code> even parts. This is for solving many quick trajectories on a   multi-node machine. It&#39;s recommended you have one process on each node.</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="solver.html">« Solver</a><a class="docs-footer-nextpage" href="../lib/hamiltonian.html">Hamiltonian »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.17 on <span class="colophon-date" title="Wednesday 11 May 2022 06:09">Wednesday 11 May 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
